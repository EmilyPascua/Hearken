{"ast":null,"code":"import \"source-map-support/register\";\nimport uuid from \"uuid\";\nimport * as dynamoDbLib from \"./libs/dynamodb-lib\";\nimport { success, failure } from \"./libs/response-lib\";\nexport async function main(event, context) {\n  const data = JSON.parse(event.body);\n  const params = {\n    TableName: process.env.tableName,\n    Item: {\n      uId: event.requestContext.identity.cognitoIdentityId,\n      sKey: uuid.v1(),\n      content: data.content,\n      createdAt: Date.now()\n    }\n  };\n\n  try {\n    await dynamoDbLib.call(\"put\", params);\n    return success(params.Item);\n  } catch (e) {\n    return failure({\n      status: false\n    });\n  }\n}","map":{"version":3,"sources":["C:/workspace/hackathons/Hearken/hearken-app-api/create.js"],"names":["uuid","dynamoDbLib","success","failure","main","event","context","data","JSON","parse","body","params","TableName","process","env","tableName","Item","uId","requestContext","identity","cognitoIdentityId","sKey","v1","content","createdAt","Date","now","call","e","status"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAO,KAAKC,WAAZ,MAA6B,qBAA7B;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,qBAAjC;AAEA,OAAO,eAAeC,IAAf,CAAoBC,KAApB,EAA2BC,OAA3B,EAAoC;AACzC,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,IAAjB,CAAb;AACA,QAAMC,MAAM,GAAG;AACbC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADV;AAEbC,IAAAA,IAAI,EAAE;AACJC,MAAAA,GAAG,EAAEZ,KAAK,CAACa,cAAN,CAAqBC,QAArB,CAA8BC,iBAD/B;AAEJC,MAAAA,IAAI,EAAErB,IAAI,CAACsB,EAAL,EAFF;AAGJC,MAAAA,OAAO,EAAEhB,IAAI,CAACgB,OAHV;AAIJC,MAAAA,SAAS,EAAEC,IAAI,CAACC,GAAL;AAJP;AAFO,GAAf;;AAUA,MAAI;AACF,UAAMzB,WAAW,CAAC0B,IAAZ,CAAiB,KAAjB,EAAwBhB,MAAxB,CAAN;AACA,WAAOT,OAAO,CAACS,MAAM,CAACK,IAAR,CAAd;AACD,GAHD,CAGE,OAAOY,CAAP,EAAU;AACV,WAAOzB,OAAO,CAAC;AAAE0B,MAAAA,MAAM,EAAE;AAAV,KAAD,CAAd;AACD;AACF","sourcesContent":["import uuid from \"uuid\";\r\nimport * as dynamoDbLib from \"./libs/dynamodb-lib\";\r\nimport { success, failure } from \"./libs/response-lib\";\r\n\r\nexport async function main(event, context) {\r\n  const data = JSON.parse(event.body);\r\n  const params = {\r\n    TableName: process.env.tableName,\r\n    Item: {\r\n      uId: event.requestContext.identity.cognitoIdentityId,\r\n      sKey: uuid.v1(),\r\n      content: data.content,\r\n      createdAt: Date.now()\r\n    }\r\n  };\r\n\r\n  try {\r\n    await dynamoDbLib.call(\"put\", params);\r\n    return success(params.Item);\r\n  } catch (e) {\r\n    return failure({ status: false });\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}